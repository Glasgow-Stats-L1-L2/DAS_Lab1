<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Scatterplots | Data Analysis: Visualising data using ggplot2 in R</title>
  <meta name="description" content="Scatterplots | Data Analysis: Visualising data using ggplot2 in R" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="Scatterplots | Data Analysis: Visualising data using ggplot2 in R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Scatterplots | Data Analysis: Visualising data using ggplot2 in R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="viewing-the-data.html"/>
<link rel="next" href="histograms.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Getting Started</a></li>
<li class="chapter" data-level="" data-path="viewing-the-data.html"><a href="viewing-the-data.html"><i class="fa fa-check"></i>Viewing The Data</a></li>
<li class="chapter" data-level="" data-path="scatterplots.html"><a href="scatterplots.html"><i class="fa fa-check"></i>Scatterplots</a>
<ul>
<li class="chapter" data-level="" data-path="scatterplots.html"><a href="scatterplots.html#over-plotting"><i class="fa fa-check"></i>Over-plotting</a></li>
<li class="chapter" data-level="" data-path="scatterplots.html"><a href="scatterplots.html#scatterplot-matrix"><i class="fa fa-check"></i>Scatterplot matrix</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="histograms.html"><a href="histograms.html"><i class="fa fa-check"></i>Histograms</a></li>
<li class="chapter" data-level="" data-path="boxplots.html"><a href="boxplots.html"><i class="fa fa-check"></i>Boxplots</a></li>
<li class="chapter" data-level="" data-path="barplots.html"><a href="barplots.html"><i class="fa fa-check"></i>Barplots</a></li>
<li class="chapter" data-level="" data-path="linegraphs.html"><a href="linegraphs.html"><i class="fa fa-check"></i>Linegraphs</a></li>
<li class="chapter" data-level="" data-path="arranging-multiple-plots-on-a-page.html"><a href="arranging-multiple-plots-on-a-page.html"><i class="fa fa-check"></i>Arranging Multiple Plots On A Page</a></li>
<li class="chapter" data-level="" data-path="further-tasks.html"><a href="further-tasks.html"><i class="fa fa-check"></i>Further Tasks</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Analysis: Visualising data using ggplot2 in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="scatterplots" class="section level1 unnumbered hasAnchor">
<h1>Scatterplots<a href="scatterplots.html#scatterplots" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The first data visualisation technique we introduce is the <strong>Scatterplot</strong> (or bivariate plot), which allows for two variables to be plotted against one another, with one plotted on the x-axis, and the other on the y-axis. This allows us to examine if there is any relationship between the two variables, such as positive or negative correlation, and whether the relationship appears linear or not.</p>
<p>Let's say we wanted to observe the relationship between departure and arrival delays. We can do that in R using the <code>ggplot</code> function. First, we can set up the plotting region for our scatterplot of departure against arrival delays as follows:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="scatterplots.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Alaska, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dep_delay, <span class="at">y =</span> arr_delay))</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ggplot"></span>
<img src="main_files/figure-html/ggplot-1.png" alt="Figure 1: Plot with no layers." width="90%" />
<p class="caption">
Figure 1: Figure 1: Plot with no layers.
</p>
</div>
<p>Here, we have set up our plotting region by giving to the <code>ggplot</code> function:</p>
<ol style="list-style-type: decimal">
<li>The data <code>Alaska</code> by setting <code>data = Alaska</code>.</li>
<li>The mapping of the coordinates for the axes using <code>aes(x = dep_delay, y = arr_delay)</code>, where <code>aes()</code> relates to the plots aesthetics. That is,
<ul>
<li><code>dep_delay</code> maps to the <code>x</code> coordinate; and</li>
<li><code>arr_delay</code> maps to the <code>y</code> coordinate.</li>
</ul></li>
</ol>
<p>In order to include the points on the scatterplot we now need to add an additional layer using the <code>+</code> command. The points are then added as follows:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="scatterplots.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Alaska, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dep_delay, <span class="at">y =</span> arr_delay)) <span class="sc">+</span> </span>
<span id="cb9-2"><a href="scatterplots.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ggplot2"></span>
<img src="main_files/figure-html/ggplot2-1.png" alt="Figure 2: Relationship between arrival and departure delays." width="90%" />
<p class="caption">
Figure 2: Figure 2: Relationship between arrival and departure delays.
</p>
</div>
<p>where <code>geom_point</code> specifies that the geometric objects to add to our plotting region are points.</p>
<p>When adding layers using <code>ggplot</code> it should be noted that:</p>
<ul>
<li>the <code>+</code> command should come at the end of lines, otherwise R will produce an error.</li>
<li>when adding additional layers it is a good idea to take a new line after each <code>+</code> command. This is so your code will be nice and clear with each layer given its own line of code. This is handy for code debugging.</li>
</ul>
<p>We can change the axes labels and include a title on our plot by adding another layer as follows:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="scatterplots.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Alaska, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dep_delay, <span class="at">y =</span> arr_delay)) <span class="sc">+</span> </span>
<span id="cb10-2"><a href="scatterplots.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="scatterplots.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Departure delay (minutes)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Arrival delay (minutes)&quot;</span>,</span>
<span id="cb10-4"><a href="scatterplots.html#cb10-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Alaska Airlines flights leaving NYC in 2013&quot;</span>) </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ggplot3"></span>
<img src="main_files/figure-html/ggplot3-1.png" alt="Figure 3: Relationship between arrival and departure delays with nice labels." width="90%" />
<p class="caption">
Figure 3: Figure 3: Relationship between arrival and departure delays with nice labels.
</p>
</div>
<p><br></p>
<strong>How would you describe the relationship between departure and arrival delays?</strong>
<div id="radio_ZXLYYIEISI" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_ZXLYYIEISI" value=""></input> <span>negative</span></label><label><input type="radio" autocomplete="off" name="radio_ZXLYYIEISI" value="answer"></input> <span>positive</span></label><label><input type="radio" autocomplete="off" name="radio_ZXLYYIEISI" value=""></input> <span>none</span></label>
</div>
<div class="webex-solution">
<button>
Hint
</button>
<p>As departure delays increase, arrival delays also tends to increase.</p>
</div>
<div id="over-plotting" class="section level3 unnumbered hasAnchor">
<h3>Over-plotting<a href="scatterplots.html#over-plotting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>From our scatterplot it is clear to see that the vast majority of the points lie close to zero for both departure and arrival delays. This can make it difficult at times to observe what is going on. This is due to so many points being plotted very close to each other, and often plotted over one another in such a way that it is impossible to count how many points are actually plotted. This is referred to as <strong>over-plotting</strong>. Using <code>ggplot</code>, there are two ways we can address this problem:</p>
<ol style="list-style-type: decimal">
<li>adjust the transparency of the plotted points using the <code>alpha</code> argument.</li>
<li>jitter the points using the <code>geom_jitter</code> function.</li>
</ol>
<p><strong>Transparency</strong> - We shall first alter the transparency of the points and see if this improves the situation. This is done as follows:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="scatterplots.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Alaska, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dep_delay, <span class="at">y =</span> arr_delay)) <span class="sc">+</span> </span>
<span id="cb11-2"><a href="scatterplots.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="scatterplots.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Departure delay (minutes)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Arrival delay (minutes)&quot;</span>,</span>
<span id="cb11-4"><a href="scatterplots.html#cb11-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Alaska Airlines flights leaving NYC in 2013&quot;</span>) </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ggplot4"></span>
<img src="main_files/figure-html/ggplot4-1.png" alt="Figure 4: Relationship between arrival and departure delays with alpha = 0.2." width="90%" />
<p class="caption">
Figure 4: Figure 4: Relationship between arrival and departure delays with alpha = 0.2.
</p>
</div>
<p>The <code>alpha</code> command ranges between 0 and 1, where 0 relates to 100% transparency, while 1 (default) sets the points to be 100% opaque. By changing the transparency levels of the points we can observe clusters of points that are close to one another as they will be darker than areas of the plot with fewer points clustered together.</p>
<p><br></p>
<p><strong>Task</strong>: Play around with different levels of <code>alpha</code> to see how it effects the points.</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>You may want to edit the R code above.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="scatterplots.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Alaska, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dep_delay, <span class="at">y =</span> arr_delay)) <span class="sc">+</span> </span>
<span id="cb12-2"><a href="scatterplots.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb12-3"><a href="scatterplots.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Departure delay (minutes)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Arrival delay (minutes)&quot;</span>,</span>
<span id="cb12-4"><a href="scatterplots.html#cb12-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Alaska Airlines flights leaving NYC in 2013&quot;</span>) </span></code></pre></div>
<p><img src="main_files/figure-html/Task2-solution-1.png" width="672" /></p>
</div>
<p><br></p>
<p><strong>Jittering</strong> - The idea behind jittering is that each point is randomly moved, or nudged, slightly from its original position in such a way that clusters of points with the same coordinates can be observed, instead of being plotted on top of one another. To understand this, let's create a small data set consisting purely of zeros, such that:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="scatterplots.html#cb13-1" aria-hidden="true" tabindex="-1"></a>jitter.example <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">10</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span></code></pre></div>
<p>This basically creates a 10 by 2 matrix of zeros. You can look at it in the console by simply typing:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="scatterplots.html#cb14-1" aria-hidden="true" tabindex="-1"></a>jitter.example</span></code></pre></div>
<pre><code>##       [,1] [,2]
##  [1,]    0    0
##  [2,]    0    0
##  [3,]    0    0
##  [4,]    0    0
##  [5,]    0    0
##  [6,]    0    0
##  [7,]    0    0
##  [8,]    0    0
##  [9,]    0    0
## [10,]    0    0</code></pre>
<p>Now, <code>ggplot</code> only works with data frames and not matrices, so we need to convert <code>jitter.example</code> into a data frame. This can be done using:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="scatterplots.html#cb16-1" aria-hidden="true" tabindex="-1"></a>jitter.example <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(jitter.example)</span></code></pre></div>
<p>If in doubt, there are functions within R that can be used to determine whether an object is a matrix or a data frame. See:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="scatterplots.html#cb17-1" aria-hidden="true" tabindex="-1"></a>?is.matrix</span>
<span id="cb17-2"><a href="scatterplots.html#cb17-2" aria-hidden="true" tabindex="-1"></a>?is.data.frame</span></code></pre></div>
<p>Now, let's plot our toy example:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="scatterplots.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> jitter.example, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> V1, <span class="at">y =</span> V2)) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="scatterplots.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="main_files/figure-html/jitter%20example4-1.png" alt="Figure 5: Jitter example data scatterplot." width="90%" />
<p class="caption">
(#fig:jitter example4)Figure 5: Jitter example data scatterplot.
</p>
</div>
<p>Note that since changing <code>jitter.example</code> into a data frame, the columns have been given the default variable names <code>V1</code> and <code>V2</code>. From the plot, if you had never seen our toy example before you would think only a single value was plotted due to them all being zero. If we shift each of the points slightly using jittering we will be able to see them more clearly:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="scatterplots.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> jitter.example, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> V1, <span class="at">y =</span> V2)) <span class="sc">+</span> </span>
<span id="cb19-2"><a href="scatterplots.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.1</span>, <span class="at">height =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<div class="figure" style="text-align: center">
<img src="main_files/figure-html/jitter%20example5-1.png" alt="Figure 6: Jittered scatterplot of jitter example data." width="90%" />
<p class="caption">
(#fig:jitter example5)Figure 6: Jittered scatterplot of jitter example data.
</p>
</div>
<p>Note that <code>geom_jitter</code> has replaced <code>geom_point</code>. Now we can clearly see all 10 observations plotted. The amount of horizontal and vertical jittering of the points is controlled by the <code>width</code> and <code>height</code> arguments within <code>geom_jitter</code>.</p>
<p><br></p>
<p><strong>Task</strong>: Try playing around with different <code>width</code> and <code>height</code> values.</p>
<div class="webex-solution">
<button>
Hint
</button>
<p>Edit the <code>width</code>and <code>height</code> values of the previous R code.</p>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="scatterplots.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> jitter.example, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> V1, <span class="at">y =</span> V2)) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="scatterplots.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="fl">0.01</span>, <span class="at">height =</span> <span class="fl">0.01</span>)</span></code></pre></div>
<p><img src="main_files/figure-html/Task3-solution-1.png" width="672" /></p>
</div>
<p><br></p>
<p>The true values we generated are all zero, so it wouldn't make much sense to jitter them in such a way that they were significantly different from zero.</p>
<p>Now that we understand the idea behind jittering, let's produce a jittered scatterplot of the <code>Alaska</code> data:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="scatterplots.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Alaska, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> dep_delay, <span class="at">y =</span> arr_delay)) <span class="sc">+</span> </span>
<span id="cb21-2"><a href="scatterplots.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">width =</span> <span class="dv">30</span>, <span class="at">height =</span> <span class="dv">30</span>) <span class="sc">+</span></span>
<span id="cb21-3"><a href="scatterplots.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Departure delay (minutes)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Arrival delay (minutes)&quot;</span>,</span>
<span id="cb21-4"><a href="scatterplots.html#cb21-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Alaska Airlines flights leaving NYC in 2013&quot;</span>) </span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:ggplot5"></span>
<img src="main_files/figure-html/ggplot5-1.png" alt="Figure 7: Jittered scatterplot of arrival and departure delays." width="90%" />
<p class="caption">
Figure 5: Figure 7: Jittered scatterplot of arrival and departure delays.
</p>
</div>
<p>Now we can see more of the points plotted within the cluster of points around (0,0). However, since this cluster is so large, it can be argued that jittering has not helped much here. Also, it is important to add enough jitter in order to separate the overlapping of points, however, not so much that we lose any pattern observed within the points. It should also be noted that jittering does not change the actual values of the points within the data set, it is merely used to help with visualising the data.</p>
</div>
<div id="scatterplot-matrix" class="section level3 unnumbered hasAnchor">
<h3>Scatterplot matrix<a href="scatterplots.html#scatterplot-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>ggpairs()</code> function of the <code>GGally</code> package produces a scatterplot matrix where pairwise relationships between several numerical variables are produced together with density estimates of their univariate distributions and correlation coefficients. We will use this code from <a href="https://www.r-graph-gallery.com/199-correlation-matrix-with-ggally.html">www.r-graph-gallery.com</a> to illustrate.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="scatterplots.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb22-2"><a href="scatterplots.html#cb22-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-3"><a href="scatterplots.html#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create data </span></span>
<span id="cb22-4"><a href="scatterplots.html#cb22-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>( <span class="at">var1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>,<span class="at">sd=</span><span class="dv">20</span>), </span>
<span id="cb22-5"><a href="scatterplots.html#cb22-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">v2 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>,<span class="at">sd=</span><span class="dv">27</span>), </span>
<span id="cb22-6"><a href="scatterplots.html#cb22-6" aria-hidden="true" tabindex="-1"></a>                    <span class="at">v3 =</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">100</span>) <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="at">sd =</span> <span class="dv">1</span>)) </span>
<span id="cb22-7"><a href="scatterplots.html#cb22-7" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>v4 <span class="ot">=</span> data<span class="sc">$</span>var1 <span class="sc">**</span> <span class="dv">2</span> </span>
<span id="cb22-8"><a href="scatterplots.html#cb22-8" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>v5 <span class="ot">=</span> <span class="sc">-</span>(data<span class="sc">$</span>var1 <span class="sc">**</span> <span class="dv">2</span>) </span>
<span id="cb22-9"><a href="scatterplots.html#cb22-9" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb22-10"><a href="scatterplots.html#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Check correlations (as scatterplots), distribution and print correlation coefficient </span></span>
<span id="cb22-11"><a href="scatterplots.html#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggpairs</span>(data, <span class="at">title=</span><span class="st">&quot;Scatterplot matrix with ggpairs()&quot;</span>) </span></code></pre></div>
<p><img src="main_files/figure-html/ggpairs-1.png" width="90%" style="display: block; margin: auto;" /></p>
<p><br>
<br></p>

</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="viewing-the-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="histograms.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
